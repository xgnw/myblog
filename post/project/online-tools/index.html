<!doctype html><html lang=zh-CN data-theme=dark><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.116.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple-touch-icon.png><meta itemprop=name content="在线工具"><meta itemprop=description content="基于 React 与 MUI 组件库搭建在线工具网站"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://blog.jiandan.cf/imgs/babiwawa.png"><meta itemprop=keywords content="project,react,tool"><meta property="og:type" content="article"><meta property="og:title" content="在线工具"><meta property="og:description" content="基于 React 与 MUI 组件库搭建在线工具网站"><meta property="og:image" content="/imgs/babiwawa.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://blog.jiandan.cf/post/project/online-tools/"><meta property="og:site_name" content="爸比娃娃的博客"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="爸比娃娃"><meta property="article:published_time" content="2022-03-16 00:00:00 +0000 UTC"><meta property="article:modified_time" content="2022-03-16 00:00:00 +0000 UTC"><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/font-awesome/6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.css><link rel=stylesheet href=/css/main.min.ad1ea33a63f63e6a94f5de191c205129577cfd392e2e10dec0f173ca5bdf0b7b.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"online-tools","permalink":"https://blog.jiandan.cf/post/project/online-tools/","title":"在线工具","waline":{"js":[{"alias":"waline","alias_name":"@waline/client","file":"dist/pageview.js","name":"pageview","version":"2.13.0"},{"alias":"waline","alias_name":"@waline/client","file":"dist/comment.js","name":"comment","version":"2.13.0"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>在线工具 - 爸比娃娃的博客</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>爸比娃娃的博客</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>爸比娃娃的博客</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about.html class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-flinks"><a href=/flinks.html class=hvr-icon-pulse rel=section><i class="fa fa-thumbs-up hvr-icon"></i>友情链接</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>125</span></a></li><li class="menu-item menu-item-commonweal"><a href=/404.html class=hvr-icon-pulse rel=section><i class="fa fa-heartbeat hvr-icon"></i>公益 404</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-overview-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#技术栈>技术栈</a></li><li><a href=#功能>功能</a><ul><li><a href=#查询字符串与-json-转化>查询字符串与 json 转化</a></li><li><a href=#cookie-与-json-转化>Cookie 与 json 转化</a></li><li><a href=#url-utf8-与-gbk-编码>URL UTF8 与 GBK 编码</a></li></ul></li><li><a href=#网站实现>网站实现</a><ul><li><a href=#react-codemirror>react-codemirror</a></li><li><a href=#复制>复制</a></li><li><a href=#下载>下载</a></li><li><a href=#主题切换>主题切换</a><ul><li><a href=#usecontext>useContext</a></li></ul></li></ul></li><li><a href=#keep-alive>keep-alive</a></li><li><a href=#webpack5-配置-node-相关库>Webpack5 配置 Node 相关库</a></li><li><a href=#总结>总结</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=爸比娃娃 src=/imgs/img-lazy-loading.gif data-src=/imgs/babiwawa.png><p class=site-author-name itemprop=name>爸比娃娃</p><div class=site-description itemprop=description>有钱说什么都是硬道理，没钱说什么都是吹牛逼。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>125</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>4</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>117</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/babiwawa title="Github → https://github.com/babiwawa" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span>
<span class=links-of-social-item><a href=mailto:1223112302@qq.com title="E-Mail → mailto:1223112302@qq.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
E-Mail</a></span>
<span class=links-of-social-item><a href=https://www.zhihu.com/people/hbalnw title="知乎 → https://www.zhihu.com/people/hbalnw" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-book fa-fw hvr-icon"></i>
知乎</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://jiandan.cf title=https://jiandan.cf target=_blank>简单导航</a></li><li class=links-of-blogroll-item><a href=https://lisenhui.cn title=https://lisenhui.cn target=_blank>凡梦星尘空间站</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=0001-01-01T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=287557></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=640></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2023-01-04T00:00:00+00:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-comments class="button goto-comments" title=直达评论><i class="fas fa-comments"></i></div><div id=goto-gtranslate class=button title=直达底部><i class="fas fa-arrow-down"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a>
<a href=https://github.com/babiwawa rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script>
<script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://blog.jiandan.cf/post/project/online-tools/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/babiwawa.png"><meta itemprop=name content="爸比娃娃"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="爸比娃娃"><meta itemprop=description content="有钱说什么都是硬道理，没钱说什么都是吹牛逼。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="在线工具"><meta itemprop=description content="基于 React 与 MUI 组件库搭建在线工具网站"></span><header class=post-header><h1 class=post-title itemprop="name headline">在线工具</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text title=发表于>发表于：</span>
<time title="创建时间：2022-03-16 00:00:00 +0000 UTC" itemprop="dateCreated datePublished" datetime="2022-03-16 00:00:00 +0000 UTC">2022-03-16</time></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span>
<span>3004</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>6分钟</span></span>
<span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="far fa-eye"></i></span>
<span class=post-meta-item-text>浏览：</span>
<span id=busuanzi_value_page_pv data-path=/post/project/online-tools/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class=post-body itemprop=articleBody><p><img src=/imgs/img-lazy-loading.gif data-src=/img/project/online-tools.png alt=愧怍在线工具></p><p><a href=http://tools.kuizuo.cn/ title=在线工具地址 rel="noopener external nofollow noreferrer" target=_blank class=exturl>在线工具地址
<i class="fa fa-external-link-alt"></i></a></p><p>之前学习的时候，都会看到网络上一些在线工具的网站，比如获取时间戳，编码转化，正则表达式等等，这些对于一些初学者在电脑上没有安装相对应的工具，往往就会百度搜索在线工具，然后就能实现自己所要完成的目的。</p><p>这些工具很是方便，或多或少都会用到。但一些在线工具并不能满足我日常开发中的个别需求，于是乎我也准备自己写一个这样的在线工具网站。不过这里肯定不会像其他网站那种搞得花里胡哨的，同时也不会去重复的造轮子，这样很没有意义。</p><p>顺便也记录下这类工具的编写以及用途</p><h2 id=技术栈>技术栈
<a class=header-anchor href=#%e6%8a%80%e6%9c%af%e6%a0%88></a></h2><p>有一段时间没怎么写 React 了，同时对 mui 组件库感兴趣，于是这次的使用 React 和 material 设计风格的组件库来进行编写，使用到 create-react-app 脚手架进行开发，同时使用 TypeScript 进行编写。</p><p>该纯前端，无任何后端交互部分。</p><p>不做代码分析与演示，可自行在网站上测试与 clone 源码进行查看。</p><h2 id=功能>功能
<a class=header-anchor href=#%e5%8a%9f%e8%83%bd></a></h2><h3 id=查询字符串与-json-转化>查询字符串与 json 转化
<a class=header-anchor href=#%e6%9f%a5%e8%af%a2%e5%ad%97%e7%ac%a6%e4%b8%b2%e4%b8%8e-json-%e8%bd%ac%e5%8c%96></a></h3><p>如果是在协议复现的话，有些包的请求体是通过查询字符串来拼接的，也就是协议头<code>Content-Type：application/x-www-form-urlencoded</code>，请求体如 <code>username=kuizuo&amp;password=a123456</code>，一般情况下都不会采取字符串来进行替换，而是转成 json 格式，如 <code>{ "username":"kuizuo","password","a123456"}</code> 然后使用一些库（querystring）将 json 转成查询字符串的形式。</p><p>但是编写代码的时候，<strong>需要把抓包得到的查询字符串转成 json</strong>，而这也就是这部分的主要功能。</p><p>不过 js 本身是不支持 gbk 编码的，遇到使用 gbk 进行 url 编码的网站就需要自定义先将原文本进行 gbk 编码或解码然后才进行转化操作。</p><h3 id=cookie-与-json-转化>Cookie 与 json 转化
<a class=header-anchor href=#cookie-%e4%b8%8e-json-%e8%bd%ac%e5%8c%96></a></h3><p>和查询字符串与 json 转化功能类似，只不过是将 cookie 文本与 json 互转。</p><h3 id=url-utf8-与-gbk-编码>URL UTF8 与 GBK 编码
<a class=header-anchor href=#url-utf8-%e4%b8%8e-gbk-%e7%bc%96%e7%a0%81></a></h3><p>有些国内网站上可能会使用 GBK 编码，但大多数语言默认都是 UTF8 编码，如果编码格式错误，后端接收到的请求必定失败。在这里我是使用到
<a href=https://www.npmjs.com/package/gbk-nice title=gbk-nice rel="noopener external nofollow noreferrer" target=_blank class=exturl>gbk-nice
<i class="fa fa-external-link-alt"></i>
</a>这个库，可以达到 gbk 版的<code>encodeURIComponent</code>与<code>decodeURIComponent</code>，与 js 自带的<code>encodeURIComponent</code>和<code>decodeURIComponent</code>也就是 gbk 与 utf-8 编码的区别。</p><h2 id=网站实现>网站实现
<a class=header-anchor href=#%e7%bd%91%e7%ab%99%e5%ae%9e%e7%8e%b0></a></h2><p>上面所介绍的都是作为一个工具库的功能，我只是将其封装成一个在线工具使用，并非主要重点。而主要是对一些网站的功能实现，例如复制与下载等等。</p><h3 id=react-codemirror>react-codemirror
<a class=header-anchor href=#react-codemirror></a></h3><p>在网页上展示代码，并有代码高亮的功能，首选的组件就是 codemirror 了，也是很多在线工具都使用的，我这里也不例外。</p><p><a href=https://uiwjs.github.io/react-codemirror/ title="React CodeMirror" rel="noopener external nofollow noreferrer" target=_blank class=exturl>React CodeMirror
<i class="fa fa-external-link-alt"></i></a></p><h3 id=复制>复制
<a class=header-anchor href=#%e5%a4%8d%e5%88%b6></a></h3><p>复制的话其实是可以使用 npm 包的，但是之前在写其他项目的时候，看到封装过一个 copyToClipboard 的功能，这里也就是将其拷贝置 utils 下供外部使用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Options</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>target?</span>: <span style=color:#66d9ef>HTMLElement</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>copyTextToClipboard</span>(<span style=color:#a6e22e>input</span>: <span style=color:#66d9ef>string</span>, { <span style=color:#a6e22e>target</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>body</span> }<span style=color:#f92672>:</span> <span style=color:#a6e22e>Options</span> <span style=color:#f92672>=</span> {}) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>element</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;textarea&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>previouslyFocusedElement</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>activeElement</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>input</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#39;readonly&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>)
</span></span><span style=display:flex><span>  ;(<span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>style</span> <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>any</span>).<span style=color:#a6e22e>contain</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;strict&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>position</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;absolute&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;-9999px&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>fontSize</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;12pt&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>selection</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>getSelection</span>()
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>originalRange</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>selection</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>selection</span>.<span style=color:#a6e22e>rangeCount</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>originalRange</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>selection</span>.<span style=color:#a6e22e>getRangeAt</span>(<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>append</span>(<span style=color:#a6e22e>element</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>select</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>selectionStart</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>selectionEnd</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>input</span>.<span style=color:#a6e22e>length</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>isSuccess</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>isSuccess</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>execCommand</span>(<span style=color:#e6db74>&#39;copy&#39;</span>)
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>: <span style=color:#66d9ef>any</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error(<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>element</span>.<span style=color:#a6e22e>remove</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>originalRange</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>selection</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selection</span>.<span style=color:#a6e22e>removeAllRanges</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>selection</span>.<span style=color:#a6e22e>addRange</span>(<span style=color:#a6e22e>originalRange</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>previouslyFocusedElement</span>) {
</span></span><span style=display:flex><span>    ;(<span style=color:#a6e22e>previouslyFocusedElement</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>HTMLElement</span>).<span style=color:#a6e22e>focus</span>()
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>isSuccess</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>主要使用浏览器中的<code>document.execCommand('copy')</code></p><h3 id=下载>下载
<a class=header-anchor href=#%e4%b8%8b%e8%bd%bd></a></h3><p>在需要这个需求的时候，我一开始是懵的，因为之前我是没有写过原生的浏览器下载事件，都是使用外有已经封装好的的接口直接调用即可，于是这次我也是毫不意外的通过搜索引擎找到了个复制的代码</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>BlobPart</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>BufferSource</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Blob</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>downloadByData</span>(<span style=color:#a6e22e>data</span>: <span style=color:#66d9ef>BlobPart</span>, <span style=color:#a6e22e>filename</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>mime?</span>: <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>bom?</span>: <span style=color:#66d9ef>BlobPart</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>blobData</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>bom</span> <span style=color:#f92672>!==</span> <span style=color:#e6db74>&#39;undefined&#39;</span> <span style=color:#f92672>?</span> [<span style=color:#a6e22e>bom</span>, <span style=color:#a6e22e>data</span>] <span style=color:#f92672>:</span> [<span style=color:#a6e22e>data</span>]
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>blob</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Blob</span>(<span style=color:#a6e22e>blobData</span>, { <span style=color:#66d9ef>type</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>mime</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#39;application/octet-stream&#39;</span> })
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>blobURL</span> <span style=color:#f92672>=</span> window.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>createObjectURL</span>(<span style=color:#a6e22e>blob</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>tempLink</span> <span style=color:#f92672>=</span> document.<span style=color:#a6e22e>createElement</span>(<span style=color:#e6db74>&#39;a&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>style</span>.<span style=color:#a6e22e>display</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;none&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>href</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blobURL</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#39;download&#39;</span>, <span style=color:#a6e22e>filename</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>download</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;undefined&#39;</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>setAttribute</span>(<span style=color:#e6db74>&#39;target&#39;</span>, <span style=color:#e6db74>&#39;_blank&#39;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>appendChild</span>(<span style=color:#a6e22e>tempLink</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tempLink</span>.<span style=color:#a6e22e>click</span>()
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>removeChild</span>(<span style=color:#a6e22e>tempLink</span>)
</span></span><span style=display:flex><span>  window.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>revokeObjectURL</span>(<span style=color:#a6e22e>blobURL</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>原理的话是创建
<a href=https://developer.mozilla.org/zh-CN/docs/Web/API/Blob title=Blob rel="noopener external nofollow noreferrer" target=_blank class=exturl>Blob
<i class="fa fa-external-link-alt"></i>
</a>对象（类文件对象），将数据写入，然后创建一个 a 标签（隐藏任何样式），然后并点击创建后的 a 标签，最终移除 a 标签，已达到类似点击下载按钮来下载文件的目的。</p><h3 id=主题切换>主题切换
<a class=header-anchor href=#%e4%b8%bb%e9%a2%98%e5%88%87%e6%8d%a2></a></h3><p>我一开始实现这个功能是想使用自定义 hooks 的，但是在我编写的过程中，发现切换主题的组件与 codemirror 展示的组件，并不属于在一个组件内。也就是说，我如果写了个 useTheme（实际上我也真写了），我相当于在这两个组件内都使用了独立的状态，互不影响，也就是我点击了切换主题的按钮，但影响不到展示组件的代码。也算是加深了我对 hooks 的理解。</p><p>然后我就在想 Vue 的话是如何实现主题切换的，然后翻看了一些 vue 相关的代码，不出所料，使用到全局状态管理，也就是 Store。react 状态管理有 redux，还有官方提供的 useReducer，但我感觉都太繁琐了，于是我另寻其路。</p><p>我博客不是就是用 React 写的吗，我直接看源码是如何实现的，发现使用到了 React 的 useContext，也就是接下来我所要写的。</p><h4 id=usecontext>useContext
<a class=header-anchor href=#usecontext></a></h4><p>首先要明确的是，theme 的状态应该是放在全局配置或者说最顶层的组件（当做父组件），然后子组件接收父组件的相关数据进行重新渲染组件。如果只是父子两层之间的关系还相对简单些，直接通过 props 传参即可，但是对于大部分组件关系，基本都是祖孙级别的关系，所以也就有了 Context。</p><p>并且
<a href=https://react.docschina.org/docs/context.html#reactcreatecontext title=官方文档 rel="noopener external nofollow noreferrer" target=_blank class=exturl>官方文档
<i class="fa fa-external-link-alt"></i></a> 中也是用主题切换作为 context 作为演示例子。而对于应用程序中许多组件都需要的属性，Context 无法是一个很好的选择。</p><p>首先我创建了一个 Context</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createContext</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>ThemeContext</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createContext</span>&lt;<span style=color:#f92672>any</span>&gt;({})
</span></span></code></pre></div><p>然后在顶层组件中使用（Demo 仅作为演示），其中 value 需要是需要传入给子孙组件所要使用的状态或函数，比方这里 theme 和 toggleTheme。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ThemeContext</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../contexts/theme-context&#39;</span>
</span></span><span style=display:flex><span>;&lt;<span style=color:#f92672>ThemeContext.Provider</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{{ <span style=color:#a6e22e>theme</span>, <span style=color:#a6e22e>toggleTheme</span> }}&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Demo</span>&gt;&lt;/<span style=color:#f92672>Demo</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ThemeContext.Provider</span>&gt;
</span></span></code></pre></div><p>在子孙组件的话就可以使用 <code>useContext(ThemeContext)</code> 来获取父级传入的数据，在这里也就是 <code>{ theme, toggleTheme }</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ThemeContext</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;../contexts/theme-context&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>SwitchTheme() {</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>theme</span>, <span style=color:#a6e22e>toggleTheme</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>ThemeContext</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>接着就是切换主题的按钮点击，然后更改 theme，就会渲染对应的组件，至此切换主题的功能也就完成了</p><h2 id=keep-alive>keep-alive
<a class=header-anchor href=#keep-alive></a></h2><p>在使用 mui 的 Tabs 组件库时，来回切换 Tab 会导致上一个页面的组件重新渲染，状态返回初始状态。这肯定不是我所希望的，由于我之前又有接触过 Vue，所以自然而然就联想到 keep-alive，然后我就去搜索 react 的 keep-alive 解决方案，找到了个
<a href=https://github.com/CJY0208/react-activation title=react-activation rel="noopener external nofollow noreferrer" target=_blank class=exturl>react-activation
<i class="fa fa-external-link-alt"></i>
</a>，并解决了的需求。</p><p>想做到的目的就是能把 Demo 组件缓存起来，像下面这样的写法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#f92672>KeepAlive</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>Demo</span>&gt;&lt;/<span style=color:#f92672>Demo</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>KeepAlive</span>&gt;
</span></span></code></pre></div><p>由于我使用的是 React17+，所以需要使用放置<code>&lt;AliveScope></code>外层，也就是上面的代码要改写成</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-tsx data-lang=tsx><span style=display:flex><span>&lt;<span style=color:#f92672>AliveScope</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>KeepAlive</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>Demo</span>&gt;&lt;/<span style=color:#f92672>Demo</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>KeepAlive</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>AliveScope</span>&gt;
</span></span></code></pre></div><p>不过要注意: 当与<code>react-router</code>或<code>react-redux</code>一起使用时，你需要将<code>&lt;AliveScope></code>放在<code>&lt;Router></code>或<code>&lt;Provider></code>内</p><p>这些在官方文档中也有介绍，这里就不细说了。</p><h2 id=webpack5-配置-node-相关库>Webpack5 配置 Node 相关库
<a class=header-anchor href=#webpack5-%e9%85%8d%e7%bd%ae-node-%e7%9b%b8%e5%85%b3%e5%ba%93></a></h2><p>由于使用的 create-react-app，就使用到了 Webpack5，但是 Webpack5 是不支持 Node 自带的一些库，例如我所需要使用到的 Buffer，所以就需要 npm run eject 把 webpack 配置暴露出来。</p><p>如果是要配置 Node 相关库是有一个插件
<a href=https://www.npmjs.com/package/node-polyfill-webpack-plugin title=NodePolyfillPlugin rel="noopener external nofollow noreferrer" target=_blank class=exturl>NodePolyfillPlugin
<i class="fa fa-external-link-alt"></i>
</a>，将会把 Node 的系统库的函数注册到 webpack 中供前端使用，相对简单，而且方便。但相对打包体积肯定有所提升，这里只是提提。</p><p>在 webpack5 官方有个测试
<a href=https://webpack.docschina.org/migrate/5/#test-webpack-5-compatibility title=兼容性 rel="noopener external nofollow noreferrer" target=_blank class=exturl>兼容性
<i class="fa fa-external-link-alt"></i></a> 的，就有提到 <code>Buffer: false</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>node</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Buffer</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>process</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>要解决 Buffer 也比较简单，直接通过如下代码即可</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    ...<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>webpack</span>.<span style=color:#a6e22e>ProvidePlugin</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>Buffer</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;buffer&#39;</span>, <span style=color:#e6db74>&#39;Buffer&#39;</span>],
</span></span><span style=display:flex><span>    }),
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>也有可能需要在 resolve 中设置下 fallback</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fallback</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>buffer</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>require</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#e6db74>&#39;buffer&#39;</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=总结>总结
<a class=header-anchor href=#%e6%80%bb%e7%bb%93></a></h2><p>实际编写过程其实并不轻松，但是好在很多坑与开发难点都有前人的遇到，所以搜索就已经帮我解决了很多问题。不过这期间也是不断的尝试，编译，最终实现结果是符合我一开始的期望的。</p><p>不过目前所编写的几个功能主要为我目前写协议复现所需要的，而对于大部分像时间戳，正则，加解密相关这些外面都有现成的，何必又要花费时间去造轮子呢。</p><p>后续的话应该还是会添加一些额外的功能，例如搞个代码框的配置页面，可供选择语言，代码框的高度，可视化表格的增删改。同时对代码进行一定的重构，对一些组件复用，已经完善持久化的配置。</p><p>最主要还是希望能成为我日常开发中常用的在线工具类，而不是简简单单 Demo 学习。</p></div><footer class=post-footer><div class=post-tags><a href=/tags/project>project</a>
<a href=/tags/react>react</a>
<a href=/tags/tool>tool</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="爸比娃娃 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="爸比娃娃 - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
在线工具</li><li class=post-copyright-author><strong>本文作者：</strong>
爸比娃娃</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://blog.jiandan.cf/post/project/online-tools/ title=在线工具>https://blog.jiandan.cf/post/project/online-tools/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=followme><span>欢迎关注我的其它发布渠道</span><div class=social-list><div class=social-item><a target=_blank class=social-link href=/images/wechat_channel.jpg><span class=icon><i class="fab fa-weixin"></i></span>
<span class=label>WeChat</span></a></div><div class=social-item><a target=_blank class=social-link href=/atom.xml><span class=icon><i class="fa fa-rss"></i></span>
<span class=label>RSS</span></a></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/develop/sse-server-send-event/ rel=next title="SSE 服务器发送事件"><i class="fa fa-chevron-left"></i> SSE 服务器发送事件</a></div><div class="post-nav-prev post-nav-item"><a href=/post/develop/http-config-client-ssl-certificate/ rel=prev title=HTTP请求配置客户端SSL证书>HTTP请求配置客户端SSL证书
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div id=comments class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=waline-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div id=gtranslate class=google-translate><i class="fa fa-language"></i><div id=google_translate_element></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2010 - 2023</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>爸比娃娃</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.116.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.5.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>粤ICP备 18047355-1 号</a>
<img src=/imgs/gongan.png alt=沪公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=31011402009770" target=_blank>沪公网安备 31011402009770 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel></a>
<a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云></a>
<a target=_blank href=https://webify.cloudbase.net title=Webify>Webify</a>
<span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://cdn.staticfile.org/animejs/3.2.1/anime.min.js defer></script>
<script type=text/javascript src=https://cdn.staticfile.org/viewerjs/1.11.0/viewer.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://blog.jiandan.cf/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"qiniu","router":"https://cdn.staticfile.org"},"version":"4.5.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o \n\n可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄\n(Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.13.0"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.13.0"}}}</script><script type=text/javascript src=/js/main.min.0fb3547374c917d23a2e5f762b70f3698d20b46a01cc18c38f9c467aeffc99fc.js defer></script></body></html>